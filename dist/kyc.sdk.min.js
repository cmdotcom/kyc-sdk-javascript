"use strict";!function(){window.console&&"undefined"!=typeof console||(console=console||{},["assert","clear","count","error","group","groupCollapsed","groupEnd","info","log","table","time","timeEnd","trace","warn"].map(function(e){console[e]=function(){}}));var d,c,R,o,s,B,e,l=!1,t="kyc_sdk",u="0.0.1",i=JSON.parse(JSON.stringify(window.location)),Y={},H={IDIN:null,IBAN:null},n=new Date,P=Array.prototype,a=function(t){t&&"string"==typeof t&&(t={url:t.trim()}),t.method=t.method||"GET";var i,n=function(e){t.callback&&"function"==typeof t.callback&&t.callback(e)},a=new XMLHttpRequest,e=t.params;try{a.open(t.method,t.url)}catch(e){return void n({error:e,xhr:a})}if(a.withCredentials=t.withCredentials||!1,a.addEventListener("load",function(){if(4==a.readyState)if(200<=a.status&&a.status<300){try{i=JSON.parse(a.response||a.responseText)}catch(e){i=a.response||a.responseText}n({success:i||"OK",xhr:a})}else{try{i=JSON.parse(a.response||a.responseText)}catch(e){i="invalid http status"}n({error:i||"ERROR",xhr:a})}}),a.addEventListener("error",function(){n({error:"invalid http status",xhr:a})}),t.headers)for(var r in t.headers)a.setRequestHeader(r,t.headers[r]);if("GET"==t.method&&t.params&&"object"==typeof t.params){for(var r in e=[],t.params)e.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));e=e.join("&")}try{a.send(e)}catch(e){n({error:e,xhr:a})}},k=function(e,t){var i=document.createElement("a");return i.href=e,t?{href:e,origin:i.origin,pathname:i.pathname,search:i.search,hash:i.hash}:i.origin+i.pathname+i.search+i.hash},F=function(e){e.headers={Authorization:"Bearer "+s.userToken},a(e)},J=function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i="",n=(new Date).valueOf().toString().split("");i.length<e;)0<n.length?i+=t.charAt(Math.floor(Math.max(t.length,parseInt(n.shift()+" "+n.shift())))):i+=t.charAt(Math.floor(Math.random()*t.length));return i},r=function(e,t){var i=function(e){return e.split("").map(function(e){return e.charCodeAt(0)})};i(t);return((e||"").match(/.{1,2}/g)||[]).map(function(e){return parseInt(e,16)}).map(function(e){return i(t).reduce(function(e,t){return e^t},e)}).map(function(e){return String.fromCharCode(e)}).join("")},f=function(e,t,i){i||(i=new Date).setTime(i.getTime()+9e6),document.cookie=e+"="+t+";expires="+i.toUTCString()+";path=/"},p=function(e){var t;if("undefined"!=typeof Storage){if(sessionStorage.KYCStorage)try{t=JSON.parse(r(sessionStorage.KYCStorage||"",e))}catch(e){}}else try{t=JSON.parse(r(function(e){for(var t=e+"=",i=decodeURIComponent(document.cookie).split(";"),n=0;n<i.length;n++){for(var a=i[n];" "==a.charAt(0);)a=a.substring(1);if(0==a.indexOf(t))return a.substring(t.length,a.length)}return null}("KYCStorage")||"",e))}catch(e){}return t&&t instanceof Object?t:null},y=function(e,t){t&&(t.KYCToken=s,t.kycApiEndPoint=R,t.authorisationEndPoint=c);var i,n,a,r=(i=JSON.stringify(t),n=e,a=function(e){return e.split("").map(function(e){return e.charCodeAt(0)})},i.split("").map(a).map(function(e){return a(n).reduce(function(e,t){return e^t},e)}).map(function(e){return("0"+Number(e).toString(16)).substr(-2)}).join(""));"undefined"!=typeof Storage?sessionStorage.KYCStorage=r:f("KYCStorage",r)},m=function(){if(B)return B;var a={};if(i&&i.href&&1<i.href.split("?").length){var e=i.href.split("?");e.shift(),e.join("&").split("&").map(function(e){if(1<(e=e.split("=")).length){var t=e.shift();if("trxid"==t&&(a.IDIN={transactionId:e.join("=").trim()}),"testkyc"==t&&(a.TESTKYC={testkyc:e.join("=").trim()}),"kycs"==t.split("_").shift()&&2==t.split("kycs_").length){var i=p(t.split("kycs_").pop().trim());if(i)for(var n in i)"KYCToken"==n?s=i[n]:"kycApiEndPoint"==n?R=i[n]:"authorisationEndPoint"==n?c=i[n]:(B=B||{})[n]=i[n]}}return!1}),B&&B.IDIN&&(B.IDIN.transactionId&&a.IDIN&&a.IDIN.transactionId&&!!a.IDIN.transactionId==!!B.IDIN.transactionId?G(B.IDIN.transactionId,function(e){if(e){B.IDIN=e;var t=W("forceinit",{reason:"IDIN",context:B.context});te(t,window)}delete B.IDIN}):delete B.IDIN)}return B},h=function(e){return e||null},v=function(i){if(s&&s.userToken){if(!i){var e=W("getToken",{KYCToken:s});return void te(e,window)}te("login",i),g(i)}else{var t=i||window;if(!(t&&(t.kyc&&t.kyc.context||t.kyc_config&&t.kyc_config.context)))return void z("No kyc config found","getToken",{description:"invalid KYC configuration"},{config:t?t.kyc_config||t.kyc:null},i);var n={url:c,method:"POST",withCredentials:!0,headers:{"Content-Type":"application/json;charset=UTF-8"},params:JSON.stringify({clientId:h((t.kyc_config||t.kyc).context.clientId),templateId:h((t.kyc_config||t.kyc).context.templateId),customerName:h((t.kyc_config||t.kyc).context.customerName),externalReference:h((t.kyc_config||t.kyc).context.externalReference),firstName:h((t.kyc_config||t.kyc).context.firstName),lastName:h((t.kyc_config||t.kyc).context.lastName),msisdn:h((t.kyc_config||t.kyc).context.msisdn),userIdentifier:h((t.kyc_config||t.kyc).context.userIdentifier)}),callback:function(e){if(e.success)if((s=e.success).userToken){if(s.data=function(e){try{var t=e.split(".")[0].replace("-","+").replace("_","/"),i=JSON.parse(window.atob(t)),n=e.split(".")[1].replace("-","+").replace("_","/"),a=JSON.parse(window.atob(n));return a.header=i,a}catch(e){return!1}}(s.userToken),!i){var t=W("getToken",{KYCToken:s});return void te(t,window)}te("login",i),g(i)}else te("login",i),i&&A(i);else z("No kyc Token could be retrieved from "+c+"!","getToken",e,{authorisationEndPoint:c},i)}};a(n)}},g=function(r){F({url:R+"/api/v1/users/me",callback:function(e){if(e.success){if(r)return r.kyc.status.changed=new Date,r.kyc.context.firstName=e.success.firstName,r.kyc.context.lastName=e.success.lastName,r.kyc.context.msisdn=e.success.msisdn,r.kyc.context.userIdentifier=e.success.id,te("identification",r),void N(r);var t=W("me",{me:e.success});te(t,window)}else{var i="KYC identity could not be verified!";if(console.warn(i,e.error),r){var n=C(r);n.action="getMe",n.message=i,n.error=e.error,te("error",r,n)}else{var a=W("error",{action:"getMe",message:i,error:e.error});te(a,window)}}}})},j=function(e,t,i){var n=k(i.returnUrl||o||location.href,!0),a=n.href.split("?");a.shift(),a=a.join("&").split("&").filter(function(e){return-1===["trxid","ec"].indexOf(e.toLowerCase().split("=").shift()||"")&&!("kycs_"==(e.toLowerCase().split("=").shift()||"").split("kycs_").shift()&&2==(e.toLowerCase().split("=").shift()||"").split("kycs_").length)}).join("&").trim();var r=n.origin+n.pathname+(a?"?"+a+(i.KYCSECRET&&i.KYCStorage?"&kycs_"+i.KYCSECRET+"=1":""):i.KYCSECRET&&i.KYCStorage?"?kycs_"+i.KYCSECRET+"=1":"")+n.hash,c={url:R+"/api/v1/identityservices/idin/transaction",method:"POST",params:JSON.stringify({issuerId:e,idinKeys:t,merchantReturnUrl:r}),callback:function(e){if(e.success&&e.success.issuerAuthenticationUrl)return i instanceof Object&&i.KYCSECRET&&i.KYCStorage&&e.success.transactionId&&(i.KYCStorage.IDIN={transactionId:e.success.transactionId,issuerAuthenticationUrl:e.success.issuerAuthenticationUrl},y(i.KYCSECRET,i.KYCStorage)),void window.location.replace(e.success.issuerAuthenticationUrl);z("KYC could retrieve IDIN AuthenticationUrl","getIdinIssuers",e.error||{error:e.success})}};F(c)},G=function(e,i){F({url:R+"/api/v1/identityservices/idin/transaction/"+e,callback:function(e){if(e.success){if(i)return void i(e.success);var t=W("IdinTransaction",{transaction:e.success});te(t,window)}else{z("KYC could retrieve IDIN ISSUERS!","getIdinIssuers",e.error),i&&i(null)}}})},N=function(r){var e={url:R+"/api/v1/users/"+s.data.uuid+"/dossiers",callback:function(e){if(e.success){var t=m(),i=(e.success.filter(function(e){return!!s.data.clientId&&e.clientId==s.data.clientId}).shift()||{dossiers:[]}).dossiers;if(!r){var n=W("dossiers",{dossiers:i});return void te(n,window)}r.kyc.status.changed=new Date,r.kyc.dossiers=i.filter(function(e){return t&&t.dossierId?e.id==t.dossierId:e.dossierTemplate&&e.dossierTemplate.id&&r.kyc.context.templateId?e.dossierTemplate.id==r.kyc.context.templateId:!e.id||!r.kyc.context.dossierId||e.id==r.kyc.context.dossierId});var a=C(r);switch(a.dossiers=i,te("dossiers",r,a),r.kyc.dossiers.length){case 0:A(r);break;case 1:I(r.kyc.dossiers[0].id,r);break;default:re(r)}}else z("KYC dossiers could not be fetched!","getDossiers",e.error,null,r)}};F(e)},I=function(a,r){var c=r?r.kyc.dossiers.filter(function(e){return e.id==a}).shift():null,e={url:R+"/api/v1/dossiers/"+a+"/tasks",callback:function(e){if(e.success){var t=e.success.filter(function(e){return e.visible});if(!r){var i=W("tasks",{tasks:t});return void te(i,window)}if(r.kyc.status.changed=new Date,c)switch(c.tasks=t,c.tasks.length){case 1:V(t[0].id,c.id,r);break;default:ce(r,c)}var n=C(r);return n.tasks=t,void te("tasks",r,n)}z("KYC dossier tasks could not be fetched!","getTasks",e.error,{dossierId:a},r)}};if(r){if(c)return c.tasks?void ce(r,c):void F(e);console.warn("KYC dossier could not be fetched!")}F(e)},V=function(a,r,c){var o,s=c&&c.kyc?c.kyc.dossiers.filter(function(e){return e.id==r}).shift():null,e={url:R+"/api/v1/tasks/"+a,callback:function(e){if(e.success){var i=e.success;if(!c){var t=W("task",{task:i});return void te(t,window)}if("function"==typeof c)return void c(i);if(c&&c.kyc){if(c.kyc.status.changed=new Date,s&&o){var n;if(window.kyc_config&&window.kyc_config.prefill&&"function"==typeof window.kyc_config.prefill)i.checks.map(function(e){e&&!e.value&&e.definition&&e.definition.metaDataKey&&(n||(n={}),n[e.definition.metaDataKey]="")}),n&&window.kyc_config.prefill(n,function(t){t&&(i.checks=i.checks.map(function(e){return e&&!e.value&&e.definition&&e.definition.metaDataKey&&t[e.definition.metaDataKey]&&(e.value=t[e.definition.metaDataKey]),e})),c.kyc.status.changed=new Date,oe(c,s,o=i),te("task",c)});c.kyc.status.changed=new Date,oe(c,s,o=i)}te("task",c)}}else"function"!=typeof c?z("KYC dossier task could not be fetched!","getTask",e.error,{taskId:a,dossierId:r},c):c({error:e.error})}};if(c&&c.kyc&&s){if(s.tasks){if(o=s.tasks.filter(function(e){return e.id==a}).shift()){if(o.checks)return void oe(c,s,o);F(e)}return}z("KYC dossier could not be fetched!","getTask",{description:"invalid KYC dossier"},{taskId:a,dossierId:r},c)}else F(e)},Z=function(i,n,a){F({url:R+"/api/v1/uploads/"+i,method:"GET",callback:function(e){if(e.success){if(Y[i]=e.success,n)return void(a&&a({success:e.success}));var t=W("uploadId",{uploadId:i,content:e.success});te(t,window)}else z("No upload with the id "+i+" could be retrieved!","getUpload",e.error,{uploadId:i},n),a&&a({error:e.error})}})},X=function(i,n,a){F({url:R+"/api/v1/uploads/",params:i,method:"POST",callback:function(e){if(e.success&&e.success.uuid){if(Y[e.success.uuid]=i,n)return void(a&&a({success:e.success}));var t=W("saveUpload",{uploadId:e.success.uuid,content:i});te(t,window)}else z("The upload could not be saved!","saveUpload",e.error||{description:"no uploadId returned"},{contant:i},n),a&&a({error:e.error||{description:"no uploadId returned"}})}})},Q=function(n,a,r){var e={url:R+"/api/v1/tasks/"+n.id,method:"POST",params:JSON.stringify(n),callback:function(e){e.success?V(n.id,"",function(e){if(e.error&&(z("The task could not be fetched!","getTask",e.error,{task:n},a),r&&r({error:e.error})),n.checks=e.checks||n.checks,n.status=e.status||n.status,n.visible=e.visible||n.visible,n.shared=e.shared||n.shared,a){a.kyc.status.changed=new Date;var t=C(a);t.task=n,te("savetask",a,t),r&&r({success:n})}else{var i=W("saveTask",{task:n});te(i,window)}}):(z("The task could not be saved!","saveTask",e.error,{task:n},a),r&&r({error:e.error}))}};F(e)},S=function(e,t){if(!window.kyc_config)return l&&console.warn("No kyc_config object found on window!"),!1;var i=l;if(window.kyc_config&&(l=!0),!window.kyc_config.authorisationEndPoint)return l&&console.warn("No kyc authorisationEndPoint on the kyc_config object!"),!1;if(!window.kyc_config.kycApiEndPoint)return l&&console.warn("No kyc kycApiEndPoint on the kyc_config object!"),!1;if(c=window.kyc_config.authorisationEndPoint,R=window.kyc_config.kycApiEndPoint,o=window.kyc_config.returnUrl?k(window.kyc_config.returnUrl):null,!t){if(!window.kyc_config.context)return l&&console.warn("No context object found on the kyc_config object!"),!1;t=window.kyc_config.context}if(!e){if(!window.kyc_config.elementId)return i&&(console.warn("No elementId object found on the kyc_config object!"),console.warn("Assuming Direct SDK Access!")),{element:window,context:JSON.parse(JSON.stringify(t))};if(!(e=window.kyc_config.elementId))return l&&console.warn("No elementId is given!"),!1}return e?document.getElementById(e)?{element:document.getElementById(e),context:JSON.parse(JSON.stringify(t))}:(l&&console.warn("The HTML element with id '"+e+"'  is not present in the DOM tree!"),!1):void 0},W=function(e,t){var i;return"function"==typeof Event?i=new Event(e):(i=document.createEvent("Event")).initEvent(e,!0,!0),t&&(i.detail=t),i},z=function(e,t,i,n,a){console.warn(e,t,i,n);var r={action:t,message:e,error:i};if(n)for(var c in n)r[c]||(r[c]=n[c]);if(a){for(var c in n=C(a))r[c]||(r[c]=n[c]);te("error",a,r)}else{console.info("throw",r);var o=W("error",r);te(o,window)}},$=function(e){if(window.kyc_config&&window.kyc_config.formatDate&&"function"==typeof window.kyc_config.formatDate)return window.kyc_config.formatDate(e)},ee=function(e){return e=e||"",window.kyc_config&&window.kyc_config.translate&&"function"==typeof window.kyc_config.translate?window.kyc_config.translate(e):e},te=function(t,e,i){var n;t&&"string"==typeof t&&e&&e.kyc&&(t=W(t.trim(),i||C(e)));try{n=JSON.parse(JSON.stringify(t))}catch(e){return void console.warn(e,t,typeof t)}n.isTrusted=!0,n.type=t.type.toString(),e?function(e,t,i){if(e!=window&&(e.kyc.eventType=t),"createEvent"in document){var n=document.createEvent("HTMLEvents");return n.initEvent("load",!1,!0),n.kyctype=t,i&&(n.detail=i),e.dispatchEvent(n)}e.fireEvent("onload")}(n.target=e,n.type,n.detail):n.target="kyc_sdk",window.kyc_config&&window.kyc_config.onEvent&&"function"==typeof window.kyc_config.onEvent?window.kyc_config.onEvent(n):l&&console.warn("No onEvent function found on the kyc_config object!",{event:n})},ie=function(e,t){var i=t||d,n=i.querySelector(e);return n?n.cloneNode(!0):(console.warn("A templating error has occured.!",{selector:e,template:i.innerHTML}),null)},b={IBAN:function(e){var t,i=String(e).toUpperCase().replace(/[^A-Z0-9]/g,""),n=i.match(/^([A-Z]{2})(\d{2})([A-Z\d]+)$/);return!(!n||i.length!=={AD:24,AE:23,AT:20,AZ:28,BA:20,BE:16,BG:22,BH:22,BR:29,CH:21,CR:21,CY:28,CZ:24,DE:22,DK:18,DO:28,EE:20,ES:24,FI:18,FO:18,FR:27,GB:22,GI:23,GL:18,GR:27,GT:28,HR:21,HU:28,IE:22,IL:23,IS:26,IT:27,JO:30,KW:30,KZ:20,LB:28,LI:21,LT:20,LU:20,LV:21,MC:27,MD:24,ME:22,MK:19,MR:27,MT:31,MU:30,NL:18,NO:15,PK:24,PL:28,PS:29,PT:25,QA:29,RO:24,RS:22,SA:24,SE:24,SI:19,SK:24,SM:27,TN:24,TR:26}[n[1]])&&(t=(n[3]+n[1]+n[2]).replace(/[A-Z]/g,function(e){return((e||"").toString().charCodeAt(0)-55).toString()}),b.mod97(t))},mod97:function(e){for(var t,i=e.slice(0,2),n=2;n<e.length;n+=7)t=String(i)+e.substring(n,n+7),i=parseInt(t,10)%97;return i}},ne=function(e){var t=e.target?e.target.getAttribute("data-value-format"):"";switch(e.type){case"prefill":switch(t){case"PHONE_NUMBER":e.target.value=(e.target.value||"").replace(/[^0-9\s\+]/g,"").trim().replace(/^00+/g,"+");break;case"IBAN":e.target.value=(e.target.value||"").toUpperCase().replace(/[^A-Z0-9\s]/g,"").trim()}return;case"tokyc":switch(t){case"PHONE_NUMBER":e.target.value=(e.target.value||"").replace(/[\+]/g,"00").replace(/[^0-9]/g,"").trim();break;default:e.target.value=(e.target.value||"").trim()}return e.target.value;case"change":switch(t){case"IBAN":e.target.setCustomValidity(b.IBAN(e.target.value||"")?"Invalid IBAN":"");break;case null:default:e.target.setCustomValidity(e.target.required&&""===(e.target.value||"").trim()?"No empty strings":"")}break;case"input":e.inputType&&"insertFromPaste"==e.inputType&&ne({target:e.target,type:"prefill"});break;case"keypress":var i=e.keyCode||e.which,n=String.fromCharCode(i),a=void 0;switch(t){case"PHONE_NUMBER":if(a=["Backspace","ArrowLeft","ArrowRight",8,37,39],/[\s\+]|\./.test(n)&&e.target.value.trim()||!/[0-9\s\+]|\./.test(n)&&a.indexOf(i)<0)return void e.preventDefault();break;case"IBAN":if(a=["Backspace","ArrowLeft","ArrowRight",8,37,39],!/[A-Z0-9\-\s]|\./.test(n.toUpperCase())&&a.indexOf(i)<0)return void e.preventDefault()}}var r=(e.path||[]).filter(function(e){return!!e&&!!e.tagName&&"FORM"===e.tagName}).shift();r&&r.tagName&&P.slice.call(r.querySelectorAll("[data-kyc-task-next]")).map(function(e){e.disabled=!!r&&!r.checkValidity()})},ae=function(e){if(e&&e.appendChild){e.innerHTML="";var t=ie("[data-kyc-loader]",e.kyc.template);t&&e.appendChild(t),e.setAttribute("kyc-sdk-status","loading")}},A=function(t){if(t)try{var e=ie("[data-kyc-dossier-list]",t.kyc.template),i=e.querySelector("[data-kyc-dossier-item]"),n=e.querySelector("[data-kyc-dossier-none]"),a=n.querySelector("kyc-dossier-error");a?a.parentNode.replaceChild(document.createTextNode(ee("No dossiers found")),a):n.appendChild(document.createTextNode(ee("No dossiers found"))),i.parentNode.removeChild(i),t.innerHTML="",t.appendChild(e),t.setAttribute("kyc-sdk-status","dossiers"),te("dossierlist",t)}catch(e){return void z("A templating error has occured while building the dossier list!","dossierlist",e,{template:t.kyc.template},t)}},re=function(r){if(r&&r.appendChild)try{var e=ie("[data-kyc-dossier-list]",r.kyc.template),c=e.querySelector("[data-kyc-dossier-item]"),t=e.querySelector("[data-kyc-dossier-none]"),o=(Array.prototype,c);t.parentNode.removeChild(t),r.kyc.dossiers.map(function(t){var e=c.cloneNode(!0),i=e.querySelector("kyc-dossier-name"),n=e.querySelector("kyc-dossier-status"),a=e.querySelector("kyc-dossier-created");e.setAttribute("data-kyc-status",t.status),i&&i.parentNode.replaceChild(document.createTextNode(t.customerName),i),n&&n.parentNode.replaceChild(document.createTextNode(ee(t.status)),n),a&&a.parentNode.replaceChild(document.createTextNode($(new Date(t.createdAt))),a),o.parentNode.insertBefore(e,o.nextSibling),e.addEventListener("click",function(e){ae(r),r.kyc.history.back=[],r.kyc.history.next=[],I(t.id,r)}),o=e}),c.parentNode.removeChild(c),r.innerHTML="",r.appendChild(e),r.setAttribute("kyc-sdk-status","dossiers"),te("dossierlist",r)}catch(e){return void z("A templating error has occured while building the dossier list!","dossierlist",e,{template:r.kyc.template},r)}},ce=function(a,r){if(a&&a.appendChild)try{var e=ie("[data-kyc-task-list]",a.kyc.template),t=e.querySelector("[data-kyc-dossier-title] kyc-text"),c=e.querySelector("[data-kyc-task-item]"),i=e.querySelectorAll("[data-kyc-to-dossiers]"),o=-1<["ACCEPTED","SUBMITTED"].indexOf(r.status)?r.status:null,s=c;t&&t.parentNode.replaceChild(document.createTextNode(r.customerName),t),P.slice.call(i).map(function(e){1<a.kyc.dossiers.length?(P.slice.call(e.querySelectorAll("kyc-text")).map(function(e){e.parentNode.replaceChild(document.createTextNode(ee("Back")),e)}),e.addEventListener("click",function(){re(a)})):e.parentNode.removeChild(e)}),r.tasks.map(function(t){var e=c.cloneNode(!0),i=e.querySelector("kyc-task-name"),n=e.querySelector("kyc-task-status");e.setAttribute("data-kyc-status",o||t.status),i&&i.parentNode.replaceChild(document.createTextNode(t.name),i),n&&n.parentNode.replaceChild(document.createTextNode(ee(o||t.status)),n),s.parentNode.insertBefore(e,s.nextSibling),e.addEventListener("click",function(e){ae(a),a.kyc.history.back=[],a.kyc.history.next=[],V(t.id,r.id,a)}),s=e}),c.parentNode.removeChild(c),a.innerHTML="",a.appendChild(e),a.setAttribute("kyc-sdk-status","tasks"),te("tasklist",a)}catch(e){return void z("A templating error has occured while building the dossier task list!","tasklist",e,{template:a.kyc.template},a)}},oe=function(r,c,o,s){if(r&&r.appendChild)if(-1<["ACCEPTED","SUBMITTED"].indexOf(c.status)?c.status:-1<["ACCEPTED","SUBMITTED"].indexOf(o.status)?o.status:null)!function(n,t,e){if(n&&n.appendChild)try{var i=ie("[data-kyc-dossier]",n.kyc.template);P.slice.call(i.querySelectorAll("[name]")).map(function(e){e.removeAttribute("name")});var a,r=i.querySelector("[data-kyc-dossier-title] kyc-text"),c=(i.querySelector(" [data-kyc-dossier-tasks-navigation]"),i.querySelector("[data-kyc-task]")),o=c.querySelector("[data-kyc-task-title] kyc-text"),s=c.querySelector("[data-kyc-check]"),d=c.querySelector("[data-kyc-check-status]").querySelector("kyc-task-status"),l=c.querySelector("[data-kyc-task-overview]"),u=l.querySelector("[data-kyc-task-overview-check]"),k=(c.querySelector("[data-kyc-task-navigation]"),document.createElement("input")),f=(s.querySelector("[data-kyc-input]").cloneNode(!0),-1<["ACCEPTED","SUBMITTED"].indexOf(t.status)?t.status:-1<["ACCEPTED","SUBMITTED"].indexOf(e.status)?e.status:null),p=u;r&&r.parentNode.replaceChild(document.createTextNode(t.customerName),r),o&&o.parentNode.replaceChild(document.createTextNode(e.name),o),d&&d.parentNode.replaceChild(document.createTextNode(ee(f||e.status)),d),l&&l.setAttribute("data-kyc-status",f||e.status),c&&c.setAttribute("data-kyc-status",f||e.status),e.checks.map(function(t){if((t.value||"").trim()){var e=u.cloneNode(!0),i=e.querySelector(" data-kyc-check-value");switch(P.slice.call(e.querySelectorAll("kyc-check-description")).map(function(e){t.definition.description?e.parentNode.replaceChild(document.createTextNode(ee(t.definition.description)),e):e.parentNode.removeChild(e)}),e.setAttribute("data-kyc-check-value",t.value),t.definition.method&&e.setAttribute("data-kyc-method",t.definition.method||null),t.definition.valueFormat&&e.setAttribute("data-kyc-valueformat",t.definition.valueFormat||null),t.definition.method){case"RAW_DOCUMENT_SCAN":case"DOCUMENT_FILE_UPLOAD":case"SELFIE_CHECK":a=document.createComment(t.value),t.value&&(a=document.createElement("img"),Y[t.value]?a.setAttribute("src",Y[t.value]):(a.setAttribute("value",t.value),Z(t.value,n,function(e){e.success&&P.slice.call(n.querySelectorAll('img[value="'+t.value+'"]')).map(function(e){e.setAttribute("src",Y[t.value]),e.removeAttribute("value")})})));break;case"MANUAL_DATE_INPUT":a=document.createTextNode($(new Date(Date.parse(t.value))));break;default:switch(k.value=t.value||null,t.definition.valueFormat){case"NATURAL_NUMBER":case"REAL_NUMBER":k.setAttribute("type","number"),"NATURAL_NUMBER"==t.definition.valueFormat&&(k.setAttribute("step","1"),k.setAttribute("min","0"));break;case"EMAIL":k.setAttribute("type","email");break;case"URL":k.setAttribute("type","url");break;case"PHONE_NUMBER":case"IBAN":k.setAttribute("type","tel");break;default:k.setAttribute("type","text")}ne({type:"prefill",target:k}),a=document.createTextNode(k.value)}i.parentNode.replaceChild(a,i),p.parentNode.insertBefore(e,p.nextSibling),p=e}}),s.parentNode.removeChild(s),u.parentNode.removeChild(u),P.slice.call(i.querySelectorAll("[data-kyc-to-dossiers]")).map(function(e){1<n.kyc.dossiers.length?(P.slice.call(e.querySelectorAll("kyc-text")).map(function(e){e.parentNode.replaceChild(document.createTextNode(ee("Back")),e)}),e.addEventListener("click",function(){re(n)})):e.parentNode.removeChild(e)}),P.slice.call(i.querySelectorAll("[data-kyc-to-tasks]")).map(function(e){P.slice.call(e.querySelectorAll("kyc-text")).map(function(e){e.parentNode.replaceChild(document.createTextNode(ee("Back")),e)}),e.addEventListener("click",function(){ce(n,t)})}),P.slice.call(i.querySelectorAll("[data-kyc-task-previous]")).map(function(e){P.slice.call(e.querySelectorAll("kyc-text")).map(function(e){e.parentNode.replaceChild(document.createTextNode(ee("Back")),e)}),e.addEventListener("click",function(){ce(n,t)})}),P.slice.call(i.querySelectorAll("[data-kyc-task-next]")).map(function(e){e.parentNode.removeChild(e)}),n.innerHTML="",n.appendChild(i),n.setAttribute("kyc-sdk-status","task"),te("taskoverview",n)}catch(e){return z("A templating error has occured while building the dossier task check overview!","taskoverview",e,{template:n.kyc.template},n)}}(r,c,o);else{s=s||o.sequence.initialCheckId;var d=o.checks.filter(function(e){return e.id==s}).shift();if(d&&d.id){var t=o.sequence.transitions.filter(function(e){return e.from==s}).map(function(e){return e}).shift(),i=function(e){if(e){var t=e.defaultGoTo;if(e.conditionalBranches){var i=!1;e.conditionalBranches.map(function(e){if(!i)switch(e.relation){case"EQUAL":if(d.value.trim()===e.value.trim())return i=!0,void(t=e.goTo||null);break;case"NOT_EQUAL":if(d.value.trim()!=e.value.trim())return i=!0,void(t=e.goTo||null);break;case"GREATER_THAN":if(parseFloat(d.value.trim())>parseFloat(e.value.trim()))return i=!0,void(t=e.goTo||null);break;case"LESS_THAN":if(parseFloat(d.value.trim())<parseFloat(e.value.trim()))return i=!0,void(t=e.goTo||null);break;case"INCLUDES":if(d.value instanceof Array&&d.value.indexOf(e.value.trim()))return i=!0,void(t=e.goTo||null);break;case"EXCLUDES":if(d.value instanceof Array&&!d.value.indexOf(e.value.trim()))return i=!0,void(t=e.goTo||null)}})}if(t)return ae(r),r.kyc.history.back.push(function(){ae(r),oe(r,c,o,d.id)}),void oe(r,c,o,t)}ae(r),Q(o,r,function(e){e.success&&V(o.id,"",function(e){o=e,c.tasks.map(function(t){t.id==o.id&&["status","shared","name","visible"].map(function(e){t[e]=o[e]})}),ce(r,c)})})};try{var e=ie("[data-kyc-dossier]",r.kyc.template);P.slice.call(e.querySelectorAll("[name]")).map(function(e){e.removeAttribute("name")});var a,n=e.querySelector("[data-kyc-dossier-title] kyc-text"),l=(e.querySelector(" [data-kyc-dossier-tasks-navigation]"),e.querySelector("[data-kyc-task]")),u=l.querySelector("[data-kyc-task-overview]"),k=l.querySelector("[data-kyc-task-title] kyc-text"),f=l.querySelector("[data-kyc-check]"),p=l.querySelector("[data-kyc-check-status]"),y=(l.querySelector("[data-kyc-task-navigation]"),f.hasAttribute("data-kyc-errorclass")?f:f.querySelector("data-kyc-errorclass")),m=f.hasAttribute("data-kyc-successclass")?f:f.querySelector("data-kyc-successclass"),h=y?y.getAttribute("data-kyc-errorclass"):null,v=m?y.getAttribute("data-kyc-successclass"):null,g=d.id.trim(),N=!1;n&&n.parentNode.replaceChild(document.createTextNode(c.customerName),n),k&&k.parentNode.replaceChild(document.createTextNode(o.name),k),p&&p.parentNode.removeChild(p),u&&u.parentNode.removeChild(u);var I,S=f.cloneNode(!0),b=h?f==y?S:S.querySelector("data-kyc-errorclass"):null,A=v?f==m?S:S.querySelector("data-kyc-successclass"):null,C=S.querySelector("kyc-input");switch(P.slice.call(S.querySelectorAll("kyc-check-description")).map(function(e){d.definition.description?e.parentNode.replaceChild(document.createTextNode(ee(d.definition.description)),e):e.parentNode.removeChild(e)}),P.slice.call(S.querySelectorAll("kyc-check-longdescription")).map(function(e){d.definition.longDescription?e.parentNode.replaceChild(document.createTextNode(ee(d.definition.longDescription)),e):e.parentNode.removeChild(e)}),d.definition.method&&S.setAttribute("data-kyc-method",d.definition.method||null),d.definition.valueFormat&&S.setAttribute("data-kyc-valueformat",d.definition.valueFormat||null),d.definition.method){case"MANUAL_SINGLE_CHOICE_ENUM":case"MANUAL_MULTIPLE_CHOICE_ENUM":switch(a=C.querySelector("[data-kyc-options]").cloneNode(!1),d.definition.method){case"MANUAL_SINGLE_CHOICE_ENUM":if(d.definition.enumSpecification.length<4){if(N=!0,(d.definition.enumSpecification||[]).map(function(t,e){var i=C.querySelector("[data-kyc-radiobutton]").cloneNode(!0),n=i.querySelector("[data-kyc-radio-input]");n.setAttribute("type","radio"),n.setAttribute("name",g),n.setAttribute("value",t.name),0==e&&(n.required=!d.definition.optional),d.definition.optional||n.addEventListener("change",function(e){a.querySelector('[type="radio"]').setCustomValidity(""),ne({type:"test",path:e.path,target:a})}),n.value=t.name,n.checked=!!d.value&&t.name.trim()===d.value.trim(),P.slice.call(i.querySelectorAll("kyc-text")).map(function(e){e.parentNode.replaceChild(document.createTextNode(ee(t.explanation?t.explanation:t.name)),e)}),I||(I=i),a.appendChild(i)}),!d.definition.optional){var w=a.querySelector('[type="radio"]:checked');w||(w=a.querySelector('[type="radio"]'))&&w.setCustomValidity("pick one")}}else{(a=C.querySelector("[data-kyc-select-input]").cloneNode(!1)).required=!d.definition.optional;var T=(C.querySelector("[data-kyc-select-input]").querySelector("option")||document.createElement("option")).cloneNode(!1);a.setAttribute("name",g),d.value||(T.value="",T.innerHTML=ee("select an option"),a.appendChild(T)),(d.definition.enumSpecification||[]).map(function(e){(T=T.cloneNode(!0)).value=e.name,T.selected=!!d.value&&e.name.trim()===d.value.trim(),T.innerHTML=ee(e.explanation?e.explanation:e.name),a.appendChild(T)}),a.addEventListener("change",function(e){ne({type:"test",path:e.path,target:a})}),I||(I=a)}break;case"MANUAL_MULTIPLE_CHOICE_ENUM":if(g=d.id.trim()+"[]",N=!0,(d.definition.enumSpecification||[]).map(function(t,e){var i=C.querySelector("[data-kyc-checkbox]").cloneNode(!0),n=i.querySelector("[data-kyc-checkbox-input]");n.setAttribute("type","checkbox"),n.setAttribute("name",g),n.setAttribute("value",t.name),n.checked=!!d.value&&0<JSON.parse(d.value||"[]").filter(function(e){return e.trim()==t.name.trim()}).length,d.definition.optional||n.addEventListener("change",function(e){[].slice.call(a.querySelectorAll('[type="checkbox"]')).map(function(e){e.setCustomValidity("")}),ne({type:"test",path:e.path,target:a})}),P.slice.call(i.querySelectorAll("kyc-text")).map(function(e){e.parentNode.replaceChild(document.createTextNode(ee(t.explanation?t.explanation:t.name)),e)}),a.appendChild(i),I||(I=i)}),!d.definition.optional){var x=a.querySelector('[type="checkbox"]:checked');x||(x=a.querySelector('[type="checkbox"]'))&&x.setCustomValidity("pick one")}}break;default:switch(d.definition.method){case"MANUAL_TEXT_INPUT":case"MANUAL_DATE_INPUT":switch(d.definition.valueFormat){case"LONG_TEXT":(a=C.querySelector("[data-kyc-textarea]").cloneNode(!0)).setAttribute("placeholder",ee(d.definition.description)),a.value=d.value||null,a.setAttribute("name",g),a.required=!d.definition.optional,I||(I=a);break;default:switch(a=C.querySelector("[data-kyc-input]").cloneNode(!0),d.definition.valueFormat){case"NATURAL_NUMBER":case"REAL_NUMBER":a.setAttribute("type","number"),"NATURAL_NUMBER"==d.definition.valueFormat&&(a.setAttribute("step",1),a.setAttribute("min",0));break;case"EMAIL":a.setAttribute("type","email");break;case"URL":a.setAttribute("type","url");break;case"IBAN":a.setAttribute("type","text");break;case"PHONE_NUMBER":a.setAttribute("type","tel");break;default:switch(d.definition.method){case"MANUAL_DATE_INPUT":a.setAttribute("type","date");break;default:a.setAttribute("type","text")}}a.setAttribute("placeholder",ee(d.definition.description)),a.setAttribute("name",d.id),d.definition.method&&a.setAttribute("data-method",d.definition.method),d.definition.valueFormat&&a.setAttribute("data-value-format",d.definition.valueFormat),a.required=!d.definition.optional,a.value=d.value||null,I||(I=a),ne({type:"prefill",target:a})}["keypress","paste","change","input"].map(function(e){a.addEventListener(e,function(e){ne(e),e.target.checkValidity()?(A&&A.classList.add(v),b&&b.classList.remove(h)):(A&&A.classList.remove(v),b&&b.classList.add(h))})});break;case"IDIN":if(d.value)(a=document.createElement("div")).setAttribute("class",C.querySelector("[data-kyc-input]").getAttribute("class")),a.innerHTML="The IDIN check is Completed";else{if(B&&B.IDIN){var E=0,q=function(e){if(e&&e.status&&e.transactionId)switch(e.status){case"open":E<1?(E++,setTimeout(function(){G(e.transactionId,q)},1e3)):(delete B.IDIN,oe(r,c,o,s));break;case"success":delete B.IDIN,r.kyc.context.checkId=null,r.kyc.context.taskId=null,r.kyc.context.dossierId=null,d.value=e.transactionId,i(t);break;case"expired":case"cancelled":case"failure":default:return delete B.IDIN,void oe(r,c,o,s)}else delete B.IDIN,oe(r,c,o,s)};return void q(B.IDIN)}if(!H.IDIN)return void function(i){if(H.IDIN){if(i)return i(H.IDIN);var e=W("IDIN",{issuers:H.IDIN});te(e,window)}else F({url:R+"/api/v1/identityservices/idin/issuers",callback:function(e){if(e.success){if(H.IDIN=e.success,i)return void i(H.IDIN);var t=W("IdinIssuers",{issuers:H.IDIN});te(t,window)}else z("KYC could retrieve IDIN ISSUERS!","getIdinIssuers",e.error),i&&i(null)}})}(function(e){e?oe(r,c,o,s):z("A templating error has occured while building the dossier task check form! No IDIN Issuers could be fetched","taskform",{description:"No IDIN Issuers"},{template:r.kyc.template,dossier:c,task:o,checkid:s},r)});if(a=document.createElement("div"),H.IDIN&&0<(H.IDIN||[]).length)if(H.IDIN&&1<(H.IDIN||[]).length){var D=C.querySelector("[data-kyc-select-input]").cloneNode(!1),L=(C.querySelector("[data-kyc-select-input]").querySelector("option")||document.createElement("option")).cloneNode(!1);L.value="",L.innerHTML=ee("select a country"),D.appendChild(L),(H.IDIN||[]).map(function(e){e.country&&((L=(C.querySelector("[data-kyc-select-input]").querySelector("option")||document.createElement("option")).cloneNode(!1)).value=e.country||"",L.innerHTML=ee(e.country||""),D.appendChild(L))}),I||(I=D),a.appendChild(D),D.addEventListener("change",function(e){if(e.target.value){var t=C.querySelector("[data-kyc-select-input]").cloneNode(!1),i=(C.querySelector("[data-kyc-select-input]").querySelector("option")||document.createElement("option")).cloneNode(!1);i.value="",i.innerHTML=ee("select a issuer"),t.appendChild(i),(H.IDIN||[]).slice(0,1).map(function(e){e.issuers&&(e.issuers||[]).map(function(e){(i=(C.querySelector("[data-kyc-select-input]").querySelector("option")||document.createElement("option")).cloneNode(!1)).value=e.id||"",i.innerHTML=ee(e.name||""),t.appendChild(i)})}),e.target.parentNode.appendChild(t),e.target.parentNode.removeChild(e.target),t.focus(),t.addEventListener("change",function(e){if(e.target.value){var t=e.target.value.trim(),i=d.definition.requestedIdinKeys,n=J(32),a={context:JSON.parse(JSON.stringify(r.kyc.context))};ae(r),a.context.taskId=o.id,a.context.dossierId=c.id,a.context.checkId=s,j(t,i,{KYCSECRET:n,KYCStorage:a})}})}})}else{var _=C.querySelector("[data-kyc-select-input]").cloneNode(!1),M=(C.querySelector("[data-kyc-select-input]").querySelector("option")||document.createElement("option")).cloneNode(!1);M.value="",M.innerHTML=ee("select a issuer"),_.appendChild(M),(H.IDIN||[]).slice(0,1).map(function(e){e.issuers&&(e.issuers||[]).map(function(e){(M=(C.querySelector("[data-kyc-select-input]").querySelector("option")||document.createElement("option")).cloneNode(!1)).value=e.id||"",M.innerHTML=ee(e.name||""),_.appendChild(M)})}),I||(I=_),a.appendChild(_),_.addEventListener("change",function(e){if(e.target.value){var t=e.target.value.trim(),i=d.definition.requestedIdinKeys,n=J(32),a={context:JSON.parse(JSON.stringify(r.kyc.context))};ae(r),a.context.taskId=o.id,a.context.dossierId=c.id,a.context.checkId=s,j(t,i,{KYCSECRET:n,KYCStorage:a})}})}else a.innerHTML=ee("No IDIN issuers")}break;case"RAW_DOCUMENT_SCAN":case"DOCUMENT_FILE_UPLOAD":case"SELFIE_CHECK":var U=(a=C.querySelector("[data-kyc-file]").cloneNode(!0)).querySelector("[data-kyc-file-input]"),O=(C.querySelector("kyc-placeholder"),a.querySelector("[data-kyc-file-preview]")),K=document.createElement("input");K.setAttribute("type","hidden"),K.required=!d.definition.optional,K.value=d.value||null,K.setAttribute("name",g),a.appendChild(K),d.definition.method&&K.setAttribute("data-method",d.definition.method),d.definition.valueFormat&&K.setAttribute("data-value-format",d.definition.valueFormat),U.setAttribute("type","file"),U.setAttribute("placeholder",ee(d.definition.description)),I||(I=U),O.innerHTML=ee(d.definition.description),U.addEventListener("change",function(e){if(e.target.files&&e.target.files[0]){var t=new FileReader;t.onload=function(t){t&&t.target&&t.target.result&&X(t.target.result,r,function(e){e.success&&e.success.uuid&&(Y[e.success.uuid]=t&&t.target&&t.target.result?t.target.result:"",O.setAttribute("style",'background-image:url("'+Y[e.success.uuid]+'")'),K.value=e.success.uuid,K.setAttribute("value",e.success.uuid),ne({target:K,type:"change"}),K.checkValidity()?(A&&A.classList.add(v),b&&b.classList.remove(h)):(A&&A.classList.remove(v),b&&b.classList.add(h)))})},O.innerHTML=e.target.files[0].name,t.readAsDataURL(e.target.files[0])}}),d.value&&(Y[d.value]?O.setAttribute("style",'background-image:url("'+Y[d.value]+'")'):Z(d.value,r,function(e){e.success&&(O.setAttribute("style",'background-image:url("'+Y[d.value]+'")'),K.checkValidity()?(A&&A.classList.add(v),b&&b.classList.remove(h)):(A&&A.classList.remove(v),b&&b.classList.add(h)))}))}}C.parentNode.replaceChild(a,C),f.parentNode.replaceChild(S,f),P.slice.call(e.querySelectorAll("[data-kyc-to-dossiers]")).map(function(e){1<r.kyc.dossiers.length?(P.slice.call(e.querySelectorAll("kyc-text")).map(function(e){e.parentNode.replaceChild(document.createTextNode(ee("Back")),e)}),e.addEventListener("click",function(){re(r)})):e.parentNode.removeChild(e)}),P.slice.call(e.querySelectorAll("[data-kyc-to-tasks]")).map(function(e){P.slice.call(e.querySelectorAll("kyc-text")).map(function(e){e.parentNode.replaceChild(document.createTextNode(ee("Back")),e)}),e.addEventListener("click",function(){ce(r,c)})}),0<r.kyc.history.back.length?P.slice.call(e.querySelectorAll("[data-kyc-task-previous]")).map(function(e){P.slice.call(e.querySelectorAll("kyc-text")).map(function(e){e.parentNode.replaceChild(document.createTextNode(ee("Back")),e)}),e.addEventListener("click",function(){var e,t;(t=(e=r).kyc.history.back.pop())&&(e.kyc.history.next.push(t),"function"==typeof t&&t())})}):P.slice.call(e.querySelectorAll("[data-kyc-task-navigation] [data-kyc-task-previous]")).map(function(e){e.parentNode.removeChild(e)}),P.slice.call(e.querySelectorAll("[data-kyc-task-next]")).map(function(e){e.disabled=!!l&&!l.checkValidity(),P.slice.call(e.querySelectorAll("kyc-text")).map(function(e){e.parentNode.replaceChild(document.createTextNode(ee("Next")),e)}),e.addEventListener("click",function(){if(l&&l.checkValidity())return d.value=(g==d.id?ne({type:"tokyc",target:l.querySelector('[name="'+g+'"]'+(N?":checked":""))}):JSON.stringify(P.slice.call(l.querySelectorAll('[name="'+g+'"]'+(N?":checked":""))).map(function(e){return ne({type:"tokyc",target:e})})))||null,void i(t)})}),r.innerHTML="",r.appendChild(e),r.setAttribute("kyc-sdk-status","task"),I&&I.focus(),te("taskform",r)}catch(e){z("A templating error has occured while building the dossier task check form!","taskform",e,{template:r.kyc.template,dossier:c,task:o,checkid:s},r)}}else z("The check could not be determined!","taskform",{description:"check is undefined"},{dossier:c,task:o,checkid:s},r)}},C=function(e){return{context:e.kyc.context,status:e.kyc.status}},w=function(e,t){var i=m();i&&i.context&&(t=i.context);var n,a,r,c,o=document.createElement("kyc-view"),s=S(e,t);return!!s&&(e&&(l=!0),a=s.element,r=s.context,a&&(a.kyc?(a.setAttribute&&a.setAttribute("kyc-sdk-status","ready"),a.kyc.status.reset=new Date,a.kyc.context=r,c=W("reset",C(a))):(n={initialised:new Date,version:u},c=W("initialised",{status:n,context:r}),a.kyc={context:s.context,status:n,template:function(e){d=document.createElement("kyc-template");var t=document.createElement("kyc-custom-template"),i=document.createElement("kyc-default-template");return i.innerHTML='/*\x3c!-- Define the template for the dossier-list --\x3e<ul data-kyc-dossier-list><li data-kyc-dossier-none><span><kyc-dossier-error></kyc-dossier-error></span></li><li data-kyc-dossier-item><span><kyc-dossier-name></kyc-dossier-name></span><span><kyc-dossier-status></kyc-dossier-status></span><span><kyc-dossier-created></kyc-dossier-created></span></li></ul>\x3c!-- Define the template for the task-list in a dossier--\x3e<div data-kyc-task-list><h1 data-kyc-dossier-title><button data-kyc-to-dossiers></button><kyc-text></kyc-text></h1><ul><li data-kyc-task-item><span><kyc-task-name></kyc-task-name></span><span><kyc-task-status></kyc-task-status></span></li></ul></div>\x3c!-- Define the template for a single dossier --\x3e<div data-kyc-dossier><h1 data-kyc-dossier-title><button data-kyc-to-dossiers></button><kyc-text></kyc-text></h1>\x3c!-- Define the template for a single task in a dossier --\x3e<form data-kyc-task><h2 data-kyc-task-title><button data-kyc-to-tasks></button><kyc-text></kyc-text></h2>\x3c!-- Define the template for a single check in a task in a dossier --\x3e<div data-kyc-check data-kyc-errorclass="error" data-kyc-successclass="success"><label><kyc-check-description></kyc-check-description></label><kyc-input><input data-kyc-input> <textarea data-kyc-textarea></textarea> <select data-kyc-select-input></select><div data-kyc-options><div data-kyc-checkbox><label><input type="checkbox" data-kyc-checkbox-input><kyc-text></kyc-text></label></div><div data-kyc-radiobutton><label><input type="radio" data-kyc-radio-input><kyc-text></kyc-text></label></div></div><div data-kyc-file><input type="file" class="form-control" data-kyc-file-input><div class="filepreview" data-kyc-file-preview></div></div></kyc-input><small><kyc-check-longdescription></kyc-check-longdescription></small></div>\x3c!-- Define the template for the check overview in a task in a dossier --\x3e<div data-kyc-check-overview><label><kyc-check-description></kyc-check-description></label><p><data-kyc-check-value></data-kyc-check-value></p></div>\x3c!-- Define the template the navigation between tasks in a dossier --\x3e<div data-kyc-task-navigation><button data-kyc-task-previous><kyc-text></kyc-text></button> <button data-kyc-task-next><kyc-text></kyc-text></button></div></form></div>\x3c!-- Define the template the loader --\x3e<div data-kyc-loader></div>*/',t.innerHTML=e,d.appendChild(t),d.appendChild(i),d.cloneNode(!0)}(a.innerHTML.trim()),history:{back:[],next:[]}},a.setAttribute&&(a.setAttribute("kyc-sdk-status","ready"),ae(a),a.appendChild(o)))),te(c,a),v(a),a)};if(!window[t]){window[t]={get initialised(){return n},get version(){return u},init:w,getOrigLocation:function(){return i},getToken:function(){return v()},getMe:function(){if(s)return g();z("no valid Identification","getDossiers",{description:"missing KYCToken"})},getDossiers:function(){if(s)return N();z("no valid Identification","getDossiers",{description:"missing KYCToken"})},getTasks:function(e){if(s)return I(e);z("no valid Identification","getTasks",{description:"missing KYCToken"})},getTask:function(e){if(s)return V(e);z("no valid Identification"," getTask",{description:"missing KYCToken"})},getUpload:function(e){if(s)return Z(e);z("no valid Identification"," getTask",{description:"missing KYCToken"})},saveUpload:function(e){if(s)return X(e);z("no valid Identification"," getTask",{description:"missing KYCToken"})},saveTask:function(e){if(s)return Q(e);z("no valid Identification","saveTask",{description:"missing KYCToken"})}};var T=W("ready",{status:{initialised:n,version:u}});te(T,window),e=function(){m(),S()&&w()},"complete"===document.readyState?e():document.addEventListener?document.addEventListener("DOMContentLoaded",e):document.attachEvent&&document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&e()})}}();